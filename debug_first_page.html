



<!doctype html>
<html>
    <head>
        
<!-- Party Town -->
 <script type="text/javascript" src="/~partytown/partytown.js"></script>

<!-- Google tag (gtag.js) -->
<script type="text/partytown" src="https://www.googletagmanager.com/gtag/js?id=G-T41B30VG26"></script>
<script type="text/partytown">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T41B30VG26');
</script>

<!-- Metadata -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1.0">



<!-- Favicon -->
<link rel="icon" href="/favicon.ico">

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

<!-- Styles -->
<link href="/css/styles.css" rel="stylesheet">

<!-- Google reCAPTCHA -->
<script src="https://www.google.com/recaptcha/api.js?render=6LfOf24rAAAAACBZzXxlR4ki5IvRjYnwgNMu4wXz"></script>


        <meta name="robots" content="noindex">
    </head>
    <body>
        <div id="app" class="container shrink-container">
            
<div class="box">
    
                <div class="row py-2">
                    <div class="col-12 text-center">
                        <a href="/">
                            <img alt="Logo" class="logo" src="/img/logo.jpg" width="496" height="70">
                        </a>
                    </div>
                </div>
                <div id="validation-section" class="row py-2">
                    <div class="col-12 text-center">
                        <p>Validating request...</p> <img src="/img/spinner.gif" height="24" width="24">
                    </div>
                </div>
                <div id="challenge-section" class="row py-2">
                    <div class="col-12 d-flex justify-content-center text-center">
                        <form>
                            <input type="hidden" name="returnURL" value="/live/rolex/-/all?minPrice=100.0&offset=0&site=EBAY_GB">
                            <div class="g-recaptcha" data-sitekey="6LfcwG4rAAAAAE8fACIf8HYV0srEVHt1mIDhrrZ_" data-callback="verifyRecaptchaV2"></div>
                        </form>
                    </div>
                </div>
            
</div>

        </div>

        
<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>

<!-- General Scripts -->
<script src="/js/scripts.js"></script>
<script src="/js/find_form.js"></script>

        <script>
            const hadToken = 'false' == 'true';
            const returnURL = '/live/rolex/-/all?minPrice=100.0&offset=0&site=EBAY_GB';

            function showRecaptchaV2() {
                // Load the reCAPTCHA v2 script
                const script = document.createElement('script');
                script.src = 'https://www.google.com/recaptcha/api.js';
                document.head.appendChild(script);
                document.getElementById('challenge-section').style.display = 'block';
                document.getElementById('validation-section').style.display = 'none';
            }

            function verifyRecaptchaV2(token) {
                // Send the token to the backend for verification
                fetch('/challenge_verify', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        token: token,
                        cookieCheck: 'Jw1NptP8t1w'
                    })
                })
                .then(resp => resp.json())
                .then(data => {
                    if (data.success) {
                        // Redirect to the return URL if validation was successful.
                        window.location.href = returnURL;
                    } else if (data.cookiesDisabled) {
                        window.location.href = '/cookies-required';
                    } else {
                        alert('reCAPTCHA validation failed. Please try again.');
                    }
                })
                .catch(err => {
                    console.log('v2 verification failed:', err);
                    alert('An error occurred while verifying reCAPTCHA. Please try again.');
                });
            }

            if (hadToken) {
                // The user was redirected with a token, so we must've tried to validate with v3 already. Validate with v2.
                showRecaptchaV2();
            } else {
                // The user didn't have a token, so this is probably the first time we're seeing them. Try to validate with v3 first.
                grecaptcha.ready(function() {
                    grecaptcha.execute('6LfOf24rAAAAACBZzXxlR4ki5IvRjYnwgNMu4wXz', {action: 'challenge'}).then(function(token) {
                        // Send token to the backend for verification.
                        fetch('/recaptcha_verify', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                token: token,
                                cookieCheck: 'Jw1NptP8t1w'
                            })
                        })
                        .then(resp => resp.json())
                        .then(data => {
                            if (data.success) {
                                // Redirect to the return URL if validation was successful.
                                window.location.href = returnURL;
                            } else if (data.cookiesDisabled) {
                                window.location.href = '/cookies-required';
                            } else {
                                // If validation failed, show the reCAPTCHA v2 challenge.
                                showRecaptchaV2();
                            }
                        })
                        .catch(err => {
                            console.log('v3 verification failed:', err);
                            showRecaptchaV2();
                        });
                    });
                });
            }
        </script>
    </body>
</html>